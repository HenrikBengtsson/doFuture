<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Loop over a Foreach Expression using Futures — %dofuture% • doFuture</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous"><link href="../docsearch.css" rel="stylesheet"><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><meta property="og:title" content="Loop over a Foreach Expression using Futures — %dofuture%"><meta property="og:description" content="Loop over a Foreach Expression using Futures"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-SB3EQSD9FR"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SB3EQSD9FR');
</script></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">doFuture</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.12.2-9010</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/doFuture.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://www.futureverse.org/" class="external-link">
    <span class="fas fa-fast-backward"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="https://BiocParallel.FutureParam.futureverse.org" class="external-link">BiocParallel.FutureParam</a>
    </li>
    <li>
      <a href="https://doFuture.futureverse.org">doFuture</a>
    </li>
    <li>
      <a href="https://furrr.futureverse.org" class="external-link">furrr</a>
    </li>
    <li>
      <a href="https://future.futureverse.org" class="external-link">future</a>
    </li>
    <li>
      <a href="https://future.apply.futureverse.org" class="external-link">future.apply</a>
    </li>
    <li>
      <a href="https://future.batchtools.futureverse.org" class="external-link">future.batchtools</a>
    </li>
    <li>
      <a href="https://future.callr.futureverse.org" class="external-link">future.callr</a>
    </li>
    <li>
      <a href="https://future.tests.futureverse.org" class="external-link">future.tests</a>
    </li>
    <li>
      <a href="https://globals.futureverse.org" class="external-link">globals</a>
    </li>
    <li>
      <a href="https://listenv.futureverse.org" class="external-link">listenv</a>
    </li>
    <li>
      <a href="https://parallelly.futureverse.org" class="external-link">parallelly</a>
    </li>
    <li>
      <a href="https://progressr.futureverse.org" class="external-link">progressr</a>
    </li>
    <li>
      <a href="https://future.mapreduce.futureverse.org" class="external-link">future.mapreduce (experimental)</a>
    </li>
    <li>
      <a href="https://marshal.futureverse.org" class="external-link">marshal (experimental)</a>
    </li>
  </ul></li>
<li>
  <a href="https://cloud.r-project.org/package=doFuture" class="external-link">
    <span class="fab fa-r-project"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/HenrikBengtsson/doFuture/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul><form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off"></div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Loop over a Foreach Expression using Futures</h1>
    <small class="dont-index">Source: <a href="https://github.com/HenrikBengtsson/doFuture/blob/HEAD/R/dofuture_OP.R" class="external-link"><code>R/dofuture_OP.R</code></a></small>
    <div class="hidden name"><code>grapes-dofuture-grapes.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Loop over a Foreach Expression using Futures</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="va">foreach</span> <span class="op">%dofuture%</span> <span class="va">expr</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>foreach</dt>
<dd><p>A <code>foreach</code> object created by <code><a href="https://rdrr.io/pkg/foreach/man/foreach.html" class="external-link">foreach::foreach()</a></code>
and <code><a href="https://rdrr.io/pkg/foreach/man/foreach.html" class="external-link">foreach::times()</a></code>.</p></dd>


<dt>expr</dt>
<dd><p>An R expression.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The value of the foreach call.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This is a replacement for <code><a href="https://rdrr.io/pkg/foreach/man/foreach.html" class="external-link">%dopar%</a></code> of the <span class="pkg">foreach</span> package
that leverages the <span class="pkg">future</span> framework.</p>
<p>When using <code>%dofuture%</code>:</p><ul><li><p>there is no need to use <code><a href="registerDoFuture.html">registerDoFuture()</a></code></p></li>
<li><p>there is no need to use <code>%dorng%</code> of the <strong>doRNG</strong> package
(but you need to specify <code>.options.future = list(seed = TRUE)</code>
whenever using random numbers in the <code>expr</code> expression)</p></li>
<li><p>global variables and packages are identified automatically by
the <span class="pkg">future</span> framework</p></li>
<li><p>errors are relayed as-is (with <code>%dopar%</code> they captured and modified)</p></li>
</ul></div>
    <div id="global-variables-and-packages">
    <h2>Global variables and packages</h2>
    

<p>When using <code>%dofuture%</code>, the future framework identifies globals and
packages automatically (via static code inspection).  However, there
are cases where it fails to find some of the globals or packages. When
this happens, one can specify the <code><a href="https://future.futureverse.org/reference/future.html" class="external-link">future::future()</a></code> arguments <code>globals</code>
and <code>packages</code> via foreach argument <code>.options.future</code>.  For example,
if you specify argument
<code>.options.future = list(globals = structure(TRUE, ignore = "b", add = "a"))</code>
then globals are automatically identified (<code>TRUE</code>), but it ignores <code>b</code> and
always adds <code>a</code>.
For further details and instructions, see <code><a href="https://future.futureverse.org/reference/future.html" class="external-link">future::future()</a></code>.</p>
    </div>
    <div id="random-number-generation-rng-">
    <h2>Random Number Generation (RNG)</h2>
    

<p>The <code>%dofuture%</code> uses the future ecosystem to generate proper random
numbers in parallel in the same way they are generated in, for instance,
<span class="pkg">future.apply</span>. For this to work, you need to specify
<code>.options.future = list(seed = TRUE)</code>.  For example,</p>
<p></p><div class="sourceCode r"><pre><code><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/foreach/man/foreach.html" class="external-link">foreach</a></span><span class="op">(</span>i <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, .options.future <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>seed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/grapes-dofuture-grapes.html">%dofuture%</a></span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre><p></p></div>
<p>Unless <code>seed</code> is <code>FALSE</code> or <code>NULL</code>, this guarantees that the exact same
sequence of random numbers are generated <em>given the same initial
seed / RNG state</em> - this regardless of type of future backend, number of
workers, and scheduling ("chunking") strategy.</p>
<p>RNG reproducibility is achieved by pregenerating the random seeds for all
iterations by using L'Ecuyer-CMRG RNG streams.  In each
iteration, these seeds are set before evaluating the foreach expression.
<em>Note, for large number of iterations this may introduce a large overhead.</em></p>
<p>If <code>seed = TRUE</code>, then <code><a href="https://rdrr.io/r/base/Random.html" class="external-link">.Random.seed</a></code>
is used if it holds a L'Ecuyer-CMRG RNG seed, otherwise one is created
randomly.</p>
<p>If <code>seed = FALSE</code>, it is expected that none of the foreach iterations
use random number generation.
If they do, then an informative warning or error is produces depending
on settings. See <a href="https://future.futureverse.org/reference/future.html" class="external-link">future::future</a> for more details.
Using <code>seed = NULL</code>, is like <code>seed = FALSE</code> but without the check
whether random numbers were generated or not.</p>
<p>As input, <code>seed</code> may also take a fixed initial seed (integer),
either as a full L'Ecuyer-CMRG RNG seed (vector of 1+6 integers), or
as a seed generating such a full L'Ecuyer-CMRG seed. This seed will
be used to generated one L'Ecuyer-CMRG RNG stream for each iteration.</p>
<p>For further details and instructions, see
<code><a href="https://future.apply.futureverse.org/reference/future_lapply.html" class="external-link">future.apply::future_lapply()</a></code>.</p>
    </div>
    <div id="load-balancing-chunking-">
    <h2>Load balancing ("chunking")</h2>
    

<p>Whether load balancing ("chunking") should take place or not can be
controlled by specifying either argument
<code>.options.future = list(scheduling = &lt;ratio&gt;)</code> or
<code>.options.future = list(chunk.size = &lt;count&gt;)</code> to <code><a href="https://rdrr.io/pkg/foreach/man/foreach.html" class="external-link">foreach()</a></code>.</p>
<p>The value <code>chunk.size</code> specifies the average number of elements
processed per future ("chunks").
If <code>+Inf</code>, then all elements are processed in a single future (one worker).
If <code>NULL</code>, then argument <code>future.scheduling</code> is used.</p>
<p>The value <code>scheduling</code> specifies the average number of futures
("chunks") that each worker processes.
If <code>0.0</code>, then a single future is used to process all iterations;
none of the other workers are not used.
If <code>1.0</code> or <code>TRUE</code>, then one future per worker is used.
If <code>2.0</code>, then each worker will process two futures (if there are
enough iterations).
If <code>+Inf</code> or <code>FALSE</code>, then one future per iteration is used.
The default value is <code>scheduling = 1.0</code>.</p>
<p>For further details and instructions, see
<code><a href="https://future.apply.futureverse.org/reference/future_lapply.html" class="external-link">future.apply::future_lapply()</a></code>.</p>
    </div>
    <div id="control-processing-order-of-iterations">
    <h2>Control processing order of iterations</h2>
    

<p>Attribute <code>ordering</code> of <code>chunk.size</code> or <code>scheduling</code> can be used to
control the ordering the elements are iterated over, which only affects
the processing order and <em>not</em> the order values are returned.
This attribute can take the following values:</p><ul><li><p>index vector - an numeric vector of length <code>nX</code>.</p></li>
<li><p>function     - an function taking one argument which is called as
<code>ordering(nX)</code> and which must return an
index vector of length <code>nX</code>, e.g.
<code>function(n) rev(seq_len(n))</code> for reverse ordering.</p></li>
<li><p><code>"random"</code>   - this will randomize the ordering via random index
vector <code>sample.int(nX)</code>.</p></li>
</ul><p>where <code>nX</code> is the number of foreach iterations to be done.</p>
<p>For example,
<code>.options.future = list(scheduling = structure(2.0, ordering = "random"))</code>.</p>
<p><em>Note</em>, when elements are processed out of order, then captured standard
output and conditions are also relayed in that order, that is, out of order.</p>
<p>For further details and instructions, see
<code><a href="https://future.apply.futureverse.org/reference/future_lapply.html" class="external-link">future.apply::future_lapply()</a></code>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">multisession</span><span class="op">)</span>  <span class="co"># parallelize futures on the local machine</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/foreach/man/foreach.html" class="external-link">foreach</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, .combine <span class="op">=</span> <span class="va">rbind</span><span class="op">)</span> <span class="op">%dofuture%</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">x</span>, y <span class="op">=</span> <span class="va">y</span>, pid <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getpid.html" class="external-link">Sys.getpid</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     x        y    pid</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   1 1.000000 841388</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   2 1.414214 841388</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   3 1.732051 841394</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4   4 2.000000 841387</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   5 2.236068 841390</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   6 2.449490 841391</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7   7 2.645751 841389</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8   8 2.828427 841393</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9   9 3.000000 841392</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 10 3.162278 841392</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Random number generation</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/foreach/man/foreach.html" class="external-link">foreach</a></span><span class="op">(</span>i <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, .combine <span class="op">=</span> <span class="va">rbind</span>, .options.future <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>seed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">%dofuture%</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>i <span class="op">=</span> <span class="va">i</span>, random <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   i    random</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 1 0.4844937</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2 0.2718792</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 3 0.4349602</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Random number generation with the foreach() %:% nested operator</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/foreach/man/foreach.html" class="external-link">foreach</a></span><span class="op">(</span>i <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, .combine <span class="op">=</span> <span class="va">rbind</span><span class="op">)</span> <span class="op"><a href="https://rdrr.io/pkg/foreach/man/foreach.html" class="external-link">%:%</a></span></span></span>
<span class="r-in"><span>       <span class="fu"><a href="https://rdrr.io/pkg/foreach/man/foreach.html" class="external-link">foreach</a></span><span class="op">(</span>j <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">5</span>, .combine <span class="op">=</span> <span class="va">rbind</span>, .options.future <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>seed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">%dofuture%</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>i <span class="op">=</span> <span class="va">i</span>, j <span class="op">=</span> <span class="va">j</span>, random <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span><span class="op">)</span> </span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   i j     random</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 1 3 0.48659599</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1 4 0.03830654</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 1 5 0.11498686</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 2 3 0.28211748</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 2 4 0.01279614</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 2 5 0.83697547</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 3 3 0.78340249</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 3 4 0.00170539</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9 3 5 0.40746916</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Random number generation with the nested foreach() calls</span></span></span>
<span class="r-in"><span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/foreach/man/foreach.html" class="external-link">foreach</a></span><span class="op">(</span>i <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, .combine <span class="op">=</span> <span class="va">rbind</span>, .options.future <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>seed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">%dofuture%</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/pkg/foreach/man/foreach.html" class="external-link">foreach</a></span><span class="op">(</span>j <span class="op">=</span> <span class="fl">3</span><span class="op">:</span><span class="fl">5</span>, .combine <span class="op">=</span> <span class="va">rbind</span>, .options.future <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>seed <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">%dofuture%</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>i <span class="op">=</span> <span class="va">i</span>, j <span class="op">=</span> <span class="va">j</span>, random <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1L</span><span class="op">)</span><span class="op">)</span> </span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   i j    random</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 1 3 0.9518051</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 1 4 0.5241367</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 1 5 0.5692883</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 2 3 0.5241367</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 2 4 0.5692883</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 2 5 0.3075279</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7 3 3 0.5692883</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8 3 4 0.3075279</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9 3 5 0.1494599</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \dontshow{</span></span></span>
<span class="r-in"><span><span class="co">## R CMD check: make sure any open connections are closed afterward</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/class.html" class="external-link">inherits</a></span><span class="op">(</span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"sequential"</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="va">sequential</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Henrik Bengtsson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7</p> and <a href="https://github.com/HenrikBengtsson/pkgdown.extras/">pkgdown.extras</a> 0.0.0.9005.</p>
</div>

      </footer></div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: 'aa6e02fc501886fb0f7c91ac4e300456',
    indexName: 'futureverse',
    algoliaOptions: { 'facetFilters': ['project:doFuture'] },
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script></body></html>

