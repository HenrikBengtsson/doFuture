<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>doFuture: Foreach Parallel Adapter using Futures — doFuture • doFuture</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>



<meta property="og:title" content="doFuture: Foreach Parallel Adapter using Futures — doFuture" />
<meta property="og:description" content="The doFuture package provides a %dopar% adapter for
the foreach package such that any type of future
(that is supported by Future API of the future package) can
be used for asynchronous (parallel/distributed) or synchronous
(sequential) processing." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SB3EQSD9FR"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SB3EQSD9FR');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">doFuture</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.12.0-9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
<li>
  <a href="../articles/doFuture.html">Get started</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://www.futureverse.org/">
    <span class="fas fa-fast-backward"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Packages
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="https://BiocParallel.FutureParam.futureverse.org">BiocParallel.FutureParam</a>
    </li>
    <li>
      <a href="https://doFuture.futureverse.org">doFuture</a>
    </li>
    <li>
      <a href="https://furrr.futureverse.org">furrr</a>
    </li>
    <li>
      <a href="https://future.futureverse.org">future</a>
    </li>
    <li>
      <a href="https://future.apply.futureverse.org">future.apply</a>
    </li>
    <li>
      <a href="https://future.batchtools.futureverse.org">future.batchtools</a>
    </li>
    <li>
      <a href="https://future.callr.futureverse.org">future.callr</a>
    </li>
    <li>
      <a href="https://future.tests.futureverse.org">future.tests</a>
    </li>
    <li>
      <a href="https://globals.futureverse.org">globals</a>
    </li>
    <li>
      <a href="https://listenv.futureverse.org">listenv</a>
    </li>
    <li>
      <a href="https://marshal.futureverse.org">marshal</a>
    </li>
    <li>
      <a href="https://parallelly.futureverse.org">parallelly</a>
    </li>
    <li>
      <a href="https://progressr.futureverse.org">progressr</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://cloud.r-project.org/package=doFuture">
    <span class="fab fa-r-project"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/HenrikBengtsson/doFuture/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>doFuture: Foreach Parallel Adapter using Futures</h1>
    <small class="dont-index">Source: <a href='https://github.com/HenrikBengtsson/doFuture/blob/master/R/doFuture-package.R'><code>R/doFuture-package.R</code></a></small>
    <div class="hidden name"><code>doFuture.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <span class="pkg">doFuture</span> package provides a <code>%dopar%</code> adapter for
the <span class="pkg">foreach</span> package such that <em>any</em> type of future
(that is supported by Future API of the <span class="pkg">future</span> package) can
be used for asynchronous (parallel/distributed) or synchronous
(sequential) processing.</p>
    </div>



    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>In other words, <em>if a computational backend is supported via
the Future API, it'll be automatically available for all functions
and packages making using the <span class="pkg">foreach</span> framework.</em>
Neither the developer nor the end user has to change any code.</p>
    <h2 class="hasAnchor" id="usage"><a class="anchor" href="#usage"></a>Usage</h2>

    

<p>To use futures with the <span class="pkg">foreach</span> package, load <span class="pkg">doFuture</span>,
use <code><a href='registerDoFuture.html'>registerDoFuture()</a></code> to register it to be used as a
<code>%dopar%</code> adapter (no need to ever use <code>%do%</code>).
After this, how and where the computations are performed is controlled
solely by the future strategy set, which in controlled by
<code><a href='https://future.futureverse.org/reference/plan.html'>future::plan()</a></code>.  For example:</p><ul>
<li><p><code>plan(multisession)</code>:
multiple R processes on the local machine.</p></li>
<li><p><code>plan(cluster, workers = c("n1", "n2", "n2", "n3"))</code>:
multiple R processes on external machines.</p></li>
</ul>

<p>See the <span class="pkg">future</span> package for more examples.</p>
    <h2 class="hasAnchor" id="built-in-backends"><a class="anchor" href="#built-in-backends"></a>Built-in backends</h2>

    

<p>The built-in backends of <span class="pkg">doFuture</span> are for instance 'multicore'
(forked processes), 'multisession' (background R sessions), and
ad-hoc 'cluster' (background R sessions on local and / or remote machines).
Additional futures are provided by other "future" packages
(see below for some examples).</p>
    <h2 class="hasAnchor" id="backends-for-high-performance-compute-clusters"><a class="anchor" href="#backends-for-high-performance-compute-clusters"></a>Backends for high-performance compute clusters</h2>

    

<p>The <span class="pkg">future.batchtools</span> package provides support for high-performance
compute (HPC) cluster schedulers such as SGE, Slurm, and TORQUE / PBS.
For example,</p><ul>
<li><p><code>plan(batchtools_slurm)</code>:
Process via a Slurm scheduler job queue.</p></li>
<li><p><code>plan(batchtools_torque)</code>:
Process via a TORQUE / PBS scheduler job queue.</p></li>
</ul>

<p>This builds on top of the queuing framework that the <span class="pkg">batchtools</span>
package provides. For more details on backend configuration, please see
the <span class="pkg">future.Batchtools</span> and <span class="pkg">batchtools</span> packages.</p>
    <h2 class="hasAnchor" id="global-variables-and-packages"><a class="anchor" href="#global-variables-and-packages"></a>Global variables and packages</h2>

    

<p>Unless running locally in the global environment (= at the <span style="R">R</span> prompt),
the <span class="pkg">foreach</span> package requires you do specify what global variables
and packages need to be available and attached in order for the
"foreach" expression to be evaluated properly.  It is not uncommon to
get errors on one or missing variables when moving from running a
<code>res &lt;- foreach() %dopar% { ... }</code> statement on the local machine
to, say, another machine on the same network.  The solution to the
problem is to explicitly export those variables by specifying them in
the <code>.export</code> argument to <code><a href='https://rdrr.io/pkg/foreach/man/foreach.html'>foreach::foreach()</a></code>,
e.g. <code>foreach(..., .export = c("mu", "sigma"))</code>.  Likewise, if the
expression needs specific packages to be attached, they can be listed
in argument <code>.packages</code> of <code>foreach()</code>.</p>
<p>When using <code><a href='registerDoFuture.html'>doFuture::registerDoFuture()</a></code>, the above becomes less
critical, because by default the Future API identifies all globals and
all packages automatically (via static code inspection).  This is done
exactly the same way regardless of future backend.
This automatic identification of globals and packages is illustrated
by the below example, which does <em>not</em> specify
<code>.export = c("my_stat")</code>.  This works because the future framework
detects that function <code>my_stat()</code> is needed and makes sure it is
exported.  If you would use, say, <code>cl &lt;- parallel::makeCluster(2)</code>
and <code><a href='https://rdrr.io/pkg/doParallel/man/registerDoParallel.html'>doParallel::registerDoParallel(cl)</a></code>, you would get a run-time
error on <code>Error in { : task 1 failed - \"could not find function "my_stat" ...</code>.</p>
<p>Having said this, note that, in order for your "foreach" code to work
everywhere and with other types of foreach adapters as well, you may
want to make sure that you always specify arguments <code>.export</code>
and <code>.packages</code>.</p>
    <h2 class="hasAnchor" id="load-balancing-chunking-"><a class="anchor" href="#load-balancing-chunking-"></a>Load balancing ("chunking")</h2>

    

<p>Whether load balancing ("chunking") should take place or not can be
controlled by specifying either argument
<code>.options.future = list(scheduling = &lt;ratio&gt;)</code> or
<code>.options.future = list(chunk.size = &lt;count&gt;)</code> to <code>foreach()</code>.</p>
<p>The value <code>chunk.size</code> specifies the average number of elements
processed per future ("chunks").
If <code>+Inf</code>, then all elements are processed in a single future (one worker).
If <code>NULL</code>, then argument <code>future.scheduling</code> is used.</p>
<p>The value <code>scheduling</code> specifies the average number of futures
("chunks") that each worker processes.
If <code>0.0</code>, then a single future is used to process all iterations;
none of the other workers are not used.
If <code>1.0</code> or <code>TRUE</code>, then one future per worker is used.
If <code>2.0</code>, then each worker will process two futures (if there are
enough iterations).
If <code>+Inf</code> or <code>FALSE</code>, then one future per iteration is used.
The default value is <code>scheduling = 1.0</code>.</p>
<p>The name of <code>foreach()</code> argument <code>.options.future</code> follows the naming
conventions of the <span class="pkg">doMC</span>, <span class="pkg">doSNOW</span>, and <span class="pkg">doParallel</span> packages,
<em>This argument should not be mistaken for the <span style="R">R</span>
<a href='https://future.futureverse.org/reference/future.options.html'>options of the future package</a></em>.</p>
<p>For backward-compatibility reasons with existing foreach code, one may
also use arguments <code>.options.multicore = list(preschedule = &lt;logical&gt;)</code> and
<code>.options.snow = list(preschedule = &lt;logical&gt;)</code> when using <span class="pkg">doFuture</span>.
<code>.options.multicore = list(preschedule = TRUE)</code> is equivalent to
<code>.options.future = list(scheduling = 1.0)</code> and
<code>.options.multicore = list(preschedule = FALSE)</code> is equivalent to
<code>.options.future = list(scheduling = +Inf)</code>.
and analogously for <code>.options.snow</code>.
Argument <code>.options.future</code> takes precedence over argument
<code>.option.multicore</code> which takes precedence over argument <code>.option.snow</code>,
when it comes to chunking.</p>
    <h2 class="hasAnchor" id="random-number-generation-rng-"><a class="anchor" href="#random-number-generation-rng-"></a>Random Number Generation (RNG)</h2>

    

<p>The <span class="pkg">doFuture</span> package does <em>not</em> itself provide a framework
for generating proper random numbers in parallel. This is a deliberate
design choice based on how the foreach ecosystem is set up.  For valid
parallel RNG, it is recommended to use the <span class="pkg">doRNG</span> package, where
the <code><a href='https://rdrr.io/pkg/doRNG/man/grapes-dorng-grapes.html'>%dorng%</a></code> operator is used in place
of <code><a href='https://rdrr.io/pkg/foreach/man/foreach.html'>%dopar%</a></code>.
Note that <span class="pkg">doRNG</span> is designed to work with any type of foreach
adapter including <span class="pkg">doFuture</span>.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'># \donttest{</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://doFuture.futureverse.org'>doFuture</a></span><span class='op'>)</span>
<span class='fu'><a href='registerDoFuture.html'>registerDoFuture</a></span><span class='op'>(</span><span class='op'>)</span>
<span class='fu'>plan</span><span class='op'>(</span><span class='va'>multisession</span><span class='op'>)</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://github.com/RevolutionAnalytics/iterators'>iterators</a></span><span class='op'>)</span>  <span class='co'># iter()</span>


<span class='co'>## Example 1</span>
<span class='va'>A</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='fl'>100</span><span class='op'>^</span><span class='fl'>2</span><span class='op'>)</span>, nrow <span class='op'>=</span> <span class='fl'>100</span><span class='op'>)</span>
<span class='va'>B</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/t.html'>t</a></span><span class='op'>(</span><span class='va'>A</span><span class='op'>)</span>

<span class='va'>y1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='va'>B</span>, MARGIN <span class='op'>=</span> <span class='fl'>2L</span>, FUN <span class='op'>=</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>b</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='va'>A</span> <span class='op'>%*%</span> <span class='va'>b</span>
<span class='op'>}</span><span class='op'>)</span>

<span class='va'>y2</span> <span class='op'>&lt;-</span> <span class='fu'>foreach</span><span class='op'>(</span>b <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/iterators/man/iter.html'>iter</a></span><span class='op'>(</span><span class='va'>B</span>, by<span class='op'>=</span><span class='st'>"col"</span><span class='op'>)</span>, .combine <span class='op'>=</span> <span class='va'>cbind</span><span class='op'>)</span> <span class='op'>%dopar%</span> <span class='op'>{</span>
  <span class='va'>A</span> <span class='op'>%*%</span> <span class='va'>b</span>
<span class='op'>}</span>
<span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/all.equal.html'>all.equal</a></span><span class='op'>(</span><span class='va'>y2</span>, <span class='va'>y1</span><span class='op'>)</span><span class='op'>)</span>



<span class='co'>## Example 2 - Chunking (4 elements per future [= worker])</span>
<span class='va'>y3</span> <span class='op'>&lt;-</span> <span class='fu'>foreach</span><span class='op'>(</span>b <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/pkg/iterators/man/iter.html'>iter</a></span><span class='op'>(</span><span class='va'>B</span>, by<span class='op'>=</span><span class='st'>"col"</span><span class='op'>)</span>, .combine <span class='op'>=</span> <span class='va'>cbind</span>,
              .options.future <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>chunk.size <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>%dopar%</span> <span class='op'>{</span>
  <span class='va'>A</span> <span class='op'>%*%</span> <span class='va'>b</span>
<span class='op'>}</span>
<span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/all.equal.html'>all.equal</a></span><span class='op'>(</span><span class='va'>y3</span>, <span class='va'>y1</span><span class='op'>)</span><span class='op'>)</span>


<span class='co'>## Example 3 - Simulation with parallel RNG</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://renozao.github.io/doRNG'>doRNG</a></span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>Loading required package: rngtools</span></div><div class='input'>
<span class='va'>my_stat</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/r/stats/median.html'>median</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='va'>my_experiment</span> <span class='op'>&lt;-</span> <span class='kw'>function</span><span class='op'>(</span><span class='va'>n</span>, <span class='va'>mu</span> <span class='op'>=</span> <span class='fl'>0.0</span>, <span class='va'>sigma</span> <span class='op'>=</span> <span class='fl'>1.0</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='co'>## Important: use %dorng% whenever random numbers</span>
  <span class='co'>##            are involved in parallel evaluation</span>
  <span class='fu'>foreach</span><span class='op'>(</span>i <span class='op'>=</span> <span class='fl'>1</span><span class='op'>:</span><span class='va'>n</span><span class='op'>)</span> <span class='op'>%dorng%</span> <span class='op'>{</span>
    <span class='va'>x</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/stats/Normal.html'>rnorm</a></span><span class='op'>(</span><span class='va'>i</span>, mean <span class='op'>=</span> <span class='va'>mu</span>, sd <span class='op'>=</span> <span class='va'>sigma</span><span class='op'>)</span>
    <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>mu <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>, sigma <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/stats/sd.html'>sd</a></span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span>, own <span class='op'>=</span> <span class='fu'>my_stat</span><span class='op'>(</span><span class='va'>x</span><span class='op'>)</span><span class='op'>)</span>
  <span class='op'>}</span>
<span class='op'>}</span>

<span class='co'>## Reproducible results when using the same RNG seed</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>0xBEEF</span><span class='op'>)</span>
<span class='va'>y1</span> <span class='op'>&lt;-</span> <span class='fu'>my_experiment</span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>0xBEEF</span><span class='op'>)</span>
<span class='va'>y2</span> <span class='op'>&lt;-</span> <span class='fu'>my_experiment</span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span><span class='op'>(</span><span class='va'>y2</span>, <span class='va'>y1</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'>## But only then</span>
<span class='va'>y3</span> <span class='op'>&lt;-</span> <span class='fu'>my_experiment</span><span class='op'>(</span>n <span class='op'>=</span> <span class='fl'>3</span><span class='op'>)</span>
<span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>y3</span><span class='op'>)</span>
</div><div class='output co'>#&gt; List of 3
#&gt;  $ :List of 3
#&gt;   ..$ mu   : num 1.26
#&gt;   ..$ sigma: num NA
#&gt;   ..$ own  : num 1.26
#&gt;  $ :List of 3
#&gt;   ..$ mu   : num 1.33
#&gt;   ..$ sigma: num 1.58
#&gt;   ..$ own  : num 1.33
#&gt;  $ :List of 3
#&gt;   ..$ mu   : num -0.247
#&gt;   ..$ sigma: num 1.99
#&gt;   ..$ own  : num -0.993
#&gt;  - attr(*, "rng")=List of 3
#&gt;   ..$ : int [1:7] 10407 -557965149 646670728 1535601129 -1782995818 -140875233 -2010542636
#&gt;   ..$ : int [1:7] 10407 1322665455 228081586 690246064 292190646 -1209002294 -964069472
#&gt;   ..$ : int [1:7] 10407 1930909627 1980809480 -419043334 1761816562 811800279 -442022187
#&gt;  - attr(*, "doRNG_version")= chr "1.7.4"</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/stopifnot.html'>stopifnot</a></span><span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/identical.html'>identical</a></span><span class='op'>(</span><span class='va'>y3</span>, <span class='va'>y1</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># }</span>

<span class='co'># \dontshow{</span>
<span class='co'>## R CMD check: make sure any open connections are closed afterward</span>
<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/class.html'>inherits</a></span><span class='op'>(</span><span class='fu'>plan</span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"sequential"</span><span class='op'>)</span><span class='op'>)</span> <span class='fu'>plan</span><span class='op'>(</span><span class='va'>sequential</span><span class='op'>)</span>
<span class='co'># }</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Henrik Bengtsson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1 and <a href="https://github.com/HenrikBengtsson/pkgdown.extras/">pkgdown.extras</a> 0.0.0.9002.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: 'aa6e02fc501886fb0f7c91ac4e300456',
    indexName: 'futureverse',
    algoliaOptions: { 'facetFilters': ['project:doFuture'] },
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


